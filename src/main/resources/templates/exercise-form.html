<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Create Exercise and Question</title>
    <script>
        function addInvariantField() {
            const container = document.getElementById('invariants-container');
            const newField = document.createElement('input');
            newField.type = 'text';
            newField.name = 'invariants';
            newField.placeholder = 'Enter invariant';
            newField.required = true;
            container.appendChild(newField);
        }
    </script>
</head>
<body>
<h1>Редактор задания и вопросов</h1>
<section>
    <a th:href="@{/exercise/list}">
        <button>Вернуться</button>
    </a>
</section>
<section>
    <h2>Редактировать задание</h2>
    <form th:action="@{/exercise/update}" th:method="post">
        <input type="hidden" name="id" th:value="${exercise.id}">
        <div>
            <label for="exerciseTitle">Название:</label>
            <textarea id="exerciseTitle" name="title" th:text="${exercise?.getTitle()}" rows="4" required></textarea>
        </div>
        <div>
            <label for="exerciseDescription">Описание:</label>
            <textarea id="exerciseDescription" name="description" th:text="${exercise?.getDescription()}" rows="4" required></textarea>
        </div>
        <button type="submit">Редактировать</button>
    </form>
</section>
<hr>
<section>
    <h2>Добавить вопрос</h2>
    <form th:action="@{/exercise/question}" th:method="post">
        <input type="hidden" name="exercise" th:value="${exercise.id}">
        <div>
            <label for="questionDescription">Описание:</label>
            <textarea id="questionDescription" name="description" rows="3" required></textarea>
        </div>
        <div>
            <label for="invariants">Варианты ответов:</label>
            <div id="invariants-container">
                <input type="text" name="invariants" placeholder="Enter invariant" required>
            </div>
            <button type="button" onclick="addInvariantField()">Добавить вариант ответа</button>
        </div>
        <div>
            <label for="answer">Ответ:</label>
            <input type="text" id="answer" name="answer" required>
        </div>
        <button type="submit">Добавить вопрос</button>
    </form>
</section>

<hr>
<section>
    <h2>Questions List</h2>
    <ul>
        <li th:each="question : ${questions}">
            <p><strong>Description:</strong> <span th:text="${question.description}"></span></p>
            <p><strong>Invariants:</strong> <span th:text="${question.invariants}"></span></p>
            <p><strong>Answer:</strong> <span th:text="${question.answer}"></span></p>
        </li>
    </ul>
</section>
</body>
</html>
